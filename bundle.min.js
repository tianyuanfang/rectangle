function Rectangle(e,t){var a=Number(e),r=Number(t);this.area=function(){return a*r},this.perimeter=function(){return 2*(a+r)}}function validate(e){var t={isOK:!1,reason:""};return""===e?t.reason="不能为空！":/^-?(0|[1-9]\d*)(\.\d*)?([eE][+-]?\d+)?$/.test(e)?Number(e)<0?t.reason="必须大于或等于零":t.isOK=!0:t.reason="必须是数值",t}$(function(){var t=$("#width"),a=$("#height"),e=$("#calculate"),r=$("#perimeter"),n=$("#area"),i=$("#width-validate"),l=$("#height-validate"),u=!1;t.keypress(function(e){/[abcdf-zABCDF-Z`~!@#$%^&*()=_+[\]{}|;:'",<>/?\\]/.test(e.key)&&e.preventDefault(),"."==e.key&&(""==e.target.value&&e.preventDefault(),-1!=e.target.value.indexOf(".")?e.preventDefault():0==e.target.selectionStart&&e.preventDefault())}),a.keypress(function(e){/[abcdf-zABCDF-Z`~!@#$%^&*()=_+[\]{}|;:'",<>/?\\]/.test(e.key)&&e.preventDefault(),"."==e.key&&(""==e.target.value&&e.preventDefault(),-1!=e.target.value.indexOf(".")?e.preventDefault():0==e.target.selectionStart&&e.preventDefault())}),t.focusout(function(){var e=validate(t.val());u=e.isOK,e.isOK?i.html(""):(i.html("宽度"+e.reason),t.select())}),a.focusout(function(){var e=validate(a.val());u=e.isOK,e.isOK?l.html(""):(l.html("高度"+e.reason),a.select())}),e.click(function(){if(u){var e=new Rectangle(t.val(),a.val());r.val(e.perimeter()),n.val(e.area())}})});